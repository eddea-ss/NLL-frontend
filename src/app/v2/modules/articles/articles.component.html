<!-- Breadcrumbs -->
<app-breadcrumbs [breadcrumbs]="breadcrumbs"></app-breadcrumbs>

<main class="container mx-auto py-8 px-4">
  <h1 class="text-3xl font-bold mb-8 text-gray-900 border-b pb-4">Artículos</h1>

  <!-- Simplified Filter Bar -->
  <div class="mb-8">
    <input 
      type="text" 
      placeholder="Buscar artículos por título o contenido..." 
      class="p-3 border border-gray-300 rounded-lg w-full focus:ring-2 focus:ring-[#fbcc2c] focus:border-transparent outline-none transition duration-200"
      (input)="onSearchTermChange($event)" 
    />
  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"></div>
    </div>
  } @else if (error()) {
    <!-- Error State -->
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-center" role="alert">
      <strong class="font-bold">Error:</strong>
      <span class="block sm:inline">{{ error() }}</span>
    </div>
  } @else if (filteredArticles().length === 0) {
    <!-- Empty State -->
    <div class="text-center py-12">
      @if (searchTerm()) { 
        <p class="text-gray-500 text-lg">No se encontraron artículos que coincidan con "{{ searchTerm() }}".</p>
      } @else {
        <p class="text-gray-500 text-lg">No hay artículos disponibles en este momento.</p>
      }
    </div>
  } @else {
    <!-- Articles Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (article of filteredArticles(); track article.id) {
        <app-article-item 
          [data]="article" 
          (click)="openArticleModal(article)"
          (keypress.enter)="openArticleModal(article)"
          class="cursor-pointer">
        </app-article-item>
      }
    </div>
  }
</main>

<!-- Article Modal -->
@if (isModalOpen() && selectedArticle()) {
  <app-article-modal 
    [data]="selectedArticle()" 
    (close)="closeModal()">
  </app-article-modal>
} 