import{d as H,e as X,f as z,g as J,h as Q,i as Z,j as q,k as ee,l as te,m as ne,n as ie,o as re,p as oe,q as ae,r as se}from"./chunk-Q37YFLKE.js";import{a as x,b as f,c as T,d as y,e as w,f as M}from"./chunk-G2YJTG3K.js";import{D as Y,a as W,b as G}from"./chunk-BFHZCKK4.js";import{Aa as O,B as _,Ba as D,C as l,Ca as L,Ea as B,N as a,V as C,X as o,Xa as U,Ya as N,Za as K,_a as j,bb as P,e as R,ea as u,f as b,fa as h,ga as E,ha as c,hb as F,ia as p,ib as $,ka as g,lb as k,m as I,ma as d,na as s,v as S,w as v,wa as V,xa as A}from"./chunk-DBUCW2DV.js";function pe(t,n){if(t&1){let e=g();c(0),u(1,"app-course-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function _e(t,n){if(t&1&&(c(0),C(1,pe,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function le(t,n){if(t&1){let e=g();c(0),u(1,"app-article-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function me(t,n){if(t&1&&(c(0),C(1,le,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function ue(t,n){if(t&1){let e=g();c(0),u(1,"app-projects-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function he(t,n){if(t&1&&(c(0),C(1,ue,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function de(t,n){if(t&1){let e=g();c(0),u(1,"app-financing-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function ge(t,n){if(t&1&&(c(0),C(1,de,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function Ce(t,n){if(t&1){let e=g();c(0),u(1,"app-supplier-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function Se(t,n){if(t&1&&(c(0),C(1,Ce,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function xe(t,n){if(t&1){let e=g();c(0),u(1,"app-startup-item",10),d("openModal",function(){let i=_(e).index,m=s(2);return l(m.openModal(i))}),h(),p()}if(t&2){let e=n.$implicit;a(),o("data",e)}}function fe(t,n){if(t&1&&(c(0),C(1,xe,2,1,"ng-container",9),p()),t&2){let e=s();a(),o("ngForOf",e.results)}}function Te(t,n){if(t&1){let e=g();c(0),u(1,"app-course-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function ye(t,n){if(t&1){let e=g();c(0),u(1,"app-article-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function we(t,n){if(t&1){let e=g();c(0),u(1,"app-projects-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function Me(t,n){if(t&1){let e=g();c(0),u(1,"app-financing-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function Ee(t,n){if(t&1){let e=g();c(0),u(1,"app-supplier-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function Re(t,n){if(t&1){let e=g();c(0),u(1,"app-startup-modal",11),d("close",function(){_(e);let i=s(2);return l(i.closeModal())})("next",function(){_(e);let i=s(2);return l(i.showNextItem())}),h(),p()}if(t&2){let e=s(2);a(),o("data",e.dataModal)}}function be(t,n){t&1&&(c(0),C(1,Te,2,1,"ng-container",7)(2,ye,2,1,"ng-container",7)(3,we,2,1,"ng-container",7)(4,Me,2,1,"ng-container",7)(5,Ee,2,1,"ng-container",7)(6,Re,2,1,"ng-container",7),p()),t&2&&(a(),o("ngSwitchCase","curses"),a(),o("ngSwitchCase","articles"),a(),o("ngSwitchCase","projects"),a(),o("ngSwitchCase","financing"),a(),o("ngSwitchCase","suppliers"),a(),o("ngSwitchCase","startups"))}var ce=class t{google=S(G);recursosService=S(W);route=S(k);title=S($);meta=S(F);isModalOpen=!1;dataModal;currentData=[];currentIndex=0;tipIndex=0;charIndex=0;typingSpeed=50;tipDelay=3e3;typingTimeout;isUserTyping=!1;searchSubject=new b;searchTip="";searchMessage="";searchInput="";resultCount="";isLoading=!1;results=[];tips=[];customMessages=[];searchKeywords=[];breadcrumbs=[];resourceType="";labelType="";ngOnInit(){this.title.setTitle("Buscador de Recursos | Nuevo Los Lagos"),this.meta.updateTag({name:"description",content:"Accede a cursos, art\xEDculos y opciones de financiamiento dise\xF1ados para impulsar tu negocio. Encuentra recursos clave en un solo lugar con nuestro buscador."}),this.route.data.subscribe(n=>{this.resourceType=n.resourceType,this.labelType=n.label,this.initializeTexts(),this.typeTip(),this.searchSubject.pipe(I(300)).subscribe(e=>{this.handleSearch(e)})})}initializeTexts(){switch(this.resourceType){case"curses":this.labelType=x.LABEL,this.tips=x.TIPS,this.customMessages=x.CUSTOM_MESSAGES,this.searchKeywords=x.SEARCH_KEYWORDS,this.breadcrumbs=x.BREADCRUMBS;break;case"articles":this.labelType=f.LABEL,this.tips=f.TIPS,this.customMessages=f.CUSTOM_MESSAGES,this.searchKeywords=f.SEARCH_KEYWORDS,this.breadcrumbs=f.BREADCRUMBS;break;case"projects":this.labelType=T.LABEL,this.tips=T.TIPS,this.customMessages=T.CUSTOM_MESSAGES,this.searchKeywords=T.SEARCH_KEYWORDS,this.breadcrumbs=T.BREADCRUMBS;break;case"financing":this.labelType=w.LABEL,this.tips=w.TIPS,this.customMessages=w.CUSTOM_MESSAGES,this.searchKeywords=w.SEARCH_KEYWORDS,this.breadcrumbs=w.BREADCRUMBS;break;case"suppliers":this.labelType=y.LABEL,this.tips=y.TIPS,this.customMessages=y.CUSTOM_MESSAGES,this.searchKeywords=y.SEARCH_KEYWORDS,this.breadcrumbs=y.BREADCRUMBS;break;case"startups":this.labelType=M.LABEL,this.tips=M.TIPS,this.customMessages=M.CUSTOM_MESSAGES,this.searchKeywords=M.SEARCH_KEYWORDS,this.breadcrumbs=M.BREADCRUMBS;break;default:break}}typeTip(){if(!this.tips)return;this.tipIndex>=this.tips?.length&&(this.tipIndex=0);let n=this.tips[this.tipIndex];this.charIndex<n.length?(this.searchTip+=n.charAt(this.charIndex),this.charIndex++,this.typingTimeout=setTimeout(()=>this.typeTip(),this.typingSpeed)):this.typingTimeout=setTimeout(()=>{this.searchTip="",this.charIndex=0,this.tipIndex++,this.typeTip()},this.tipDelay)}onSearchInputChange(){this.searchSubject.next(this.searchInput.trim().toLowerCase())}handleSearch(n){n.length>=2?(this.isUserTyping||(this.isUserTyping=!0,this.showSearchMessage()),this.fetchResults(n)):(this.results=[],this.resultCount="",this.isUserTyping&&(this.isUserTyping=!1,this.hideSearchMessage(),this.searchTip="",clearTimeout(this.typingTimeout),this.typeTip()))}fetchResults(n){return R(this,null,function*(){if(n.length<2){this.results=[],this.resultCount="";return}try{this.isLoading=!0;let e=yield this.recursosService.fetchResults(n,this.resourceType);this.displayResults(e,n)}catch(e){console.warn("Error al obtener los datos:",e),this.results=[],this.resultCount="Error al obtener los datos."}finally{this.isLoading=!1}})}displayResults(n,e){this.currentData=n,this.results=this.currentData,this.resultCount=`${this.currentData.length} resultado${this.currentData.length!==1?"s":""} para "${e}"`,this.currentData.length===0&&(this.resultCount="No se encontraron resultados.")}openModal(n){this.currentIndex=n;let e=this.currentData[this.currentIndex];this.isModalOpen=!0,this.dataModal=e}closeModal(){this.isModalOpen=!1,this.dataModal=void 0}showNextItem(){this.currentData.length!==0&&(this.currentIndex=(this.currentIndex+1)%this.currentData.length,this.openModal(this.currentIndex))}showSearchMessage(){let n=this.customMessages[Math.floor(Math.random()*this.customMessages.length)];this.searchMessage=n}hideSearchMessage(){this.searchMessage=""}addSuggestedTerm(n){let e=this.searchInput.trim(),r=e.length>0?" ":"";this.searchInput=`${e}${r}${n}`,this.onSearchInputChange()}clearSearch(){this.searchInput="",this.results=[],this.resultCount="",this.hideSearchMessage(),this.searchTip="",clearTimeout(this.typingTimeout),this.typeTip()}handleKeyPress(n,e){(n.key==="Enter"||n.key===" ")&&this.addSuggestedTerm(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-resource-search"]],standalone:!0,features:[B],decls:18,vars:17,consts:[[3,"breadcrumbs"],[1,"container","mx-auto","py-12","flex","flex-col","lg:flex-row"],[1,"w-full","lg:w-3/4","pr8","px-8"],[1,"text-3xl","font-bold","mb-6"],[3,"searchInputChange","clearSearch","addSuggestedTerm","triggerSearch","searchTip","searchMessage","searchInput","searchKeywords","resultCount","isLoading"],[1,"space-y-8"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-4",3,"openModal","data"],[3,"close","next","data"]],template:function(e,r){e&1&&(E(0,"app-breadcrumbs",0),u(1,"main",1)(2,"div",2)(3,"h1",3),V(4),h(),u(5,"app-search-controls",4),L("searchInputChange",function(m){return D(r.searchInput,m)||(r.searchInput=m),m}),d("searchInputChange",function(){return r.onSearchInputChange()})("clearSearch",function(){return r.clearSearch()})("addSuggestedTerm",function(m){return r.addSuggestedTerm(m)})("triggerSearch",function(){return r.onSearchInputChange()}),h(),u(6,"div",5),c(7,6),C(8,_e,2,1,"ng-container",7)(9,me,2,1,"ng-container",7)(10,he,2,1,"ng-container",7)(11,ge,2,1,"ng-container",7)(12,Se,2,1,"ng-container",7)(13,fe,2,1,"ng-container",7),p(),h()(),u(14,"aside"),E(15,"app-sugeridos"),h()(),c(16,6),C(17,be,7,6,"ng-container",8),p()),e&2&&(o("breadcrumbs",r.breadcrumbs),a(4),A(r.labelType),a(),o("searchTip",r.searchTip)("searchMessage",r.searchMessage),O("searchInput",r.searchInput),o("searchKeywords",r.searchKeywords)("resultCount",r.resultCount)("isLoading",r.isLoading),a(2),o("ngSwitch",r.resourceType),a(),o("ngSwitchCase","curses"),a(),o("ngSwitchCase","articles"),a(),o("ngSwitchCase","projects"),a(),o("ngSwitchCase","financing"),a(),o("ngSwitchCase","suppliers"),a(),o("ngSwitchCase","startups"),a(3),o("ngSwitch",r.resourceType),a(),o("ngIf",r.isModalOpen&&r.dataModal))},dependencies:[P,U,N,K,j,Y,H,z,X,Q,J,q,Z,ie,ne,te,ee,oe,re,se,ae]})};export{ce as a};
